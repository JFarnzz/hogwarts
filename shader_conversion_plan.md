# HDRP Shader Conversion Plan (condensed)

This plan uses the reports generated by `tools/scan_material_shaders.py` and
`tools/material_usage_by_guid.py` to prioritize shader conversions for HDRP.

How to reproduce reports
- Run (from repo root):
  - `python tools/scan_material_shaders.py` -> produces `shader_report.csv`
  - `python tools/aggregate_by_shader.py` -> produces `shader_aggregate.csv`
  - `python tools/material_usage_by_guid.py` -> produces `material_usage_by_guid.csv`

Top shader assets to convert (based on current scan)
1. Projector shaders
   - Shader assets:
     - `Assets/Standard Assets/Effects/Projectors/Shaders/ProjectorLight.shader` (used by GridProjector.mat, LightProjector.mat)
     - `Assets/Standard Assets/Effects/Projectors/Shaders/ProjectorMultiply.shader` (used by ShadowProjector.mat)
   - Affected files: prefabs under `Assets/Standard Assets/Effects/Projectors/Prefabs/` (BlobLightProjector.prefab, BlobShadowProjector.prefab, GridProjector.prefab).
   - Priority: Medium. Projectors are scene effects; port early if your scenes rely on them for lighting/decals.

2. Tessellation shaders
   - Shader assets:
     - `Assets/Standard Assets/Effects/TessellationShaders/Shaders/BumpedSpecularSmooth.shader`
     - `Assets/Standard Assets/Effects/TessellationShaders/Shaders/BumpedSpecularDisplacement.shader`
   - Affected files: TessellationSample.unity and the specific TesselatedBumpSpecular*.mat materials.
   - Priority: Low-Medium. Tessellation is advanced and HDRP supports tessellation differently; consider dropping or rewriting these as HDRP Lit + displacement if needed.

3. Toon shading shaders (high priority for character visuals)
   - Shader assets:
     - `Assets/Standard Assets/Effects/ToonShading/Shaders/ToonBasic.shader` (ToonBasic.mat)
     - `ToonLit.shader`, `ToonBasicOutline.shader`, `ToonLitOutline.shader`
   - Affected materials: `Assets/Standard Assets/Effects/ToonShading/Materials/*.mat`
   - Affected usage: likely characters and stylized props. Priority: High for preserving visible style for players/NPCs.

4. Glass refraction
   - `Assets/Standard Assets/Effects/GlassRefraction/Shaders/GlassStainedBumpDistort.shader` (GlassRefractive.mat)
   - Priority: Medium. Reimplement as HDRP Stack or Shader Graph with GrabPass replacement if needed.

5. Misc image effects (post-processing)
   - Many `Hidden/` image effect shaders under `Assets/Standard Assets/Effects/ImageEffects/` (Bloom, MotionBlur, ColorCorrection, etc.).
   - HDRP uses Volume-based post-processing; port these effects into Volume overrides or Custom Passes.
   - Priority: High for polish, but can be deferred until gameplay is stable.

Recommended conversion order
1. Materials used by player and NPC models (Toon shaders) — preserve player visuals first.
2. Projectors and materials used in frequently-played scenes (MainMenu, levels) — fix visible artifacts early.
3. Post-processing pipeline (image effects) — move to HDRP Volumes so visual fidelity matches HDRP lighting.
4. Tessellation and specialized effects — evaluate whether to port, rewrite, or remove.

Concrete next steps I will take if you confirm
1. Create a prioritized list per-shader (CSV) that maps shader asset -> materials -> referencing scenes/prefabs. (I already generated `material_usage_by_guid.csv` which contains referenced_in_files for prioritized materials.)
2. Port `ToonBasic.shader` to HDRP Shader Graph as a first concrete port. Implementation options:
   - I can provide an Editor script that will create a Shader Graph asset programmatically inside Unity (safe; requires Shader Graph package in project). You will run it in the Unity Editor and it will produce `ToonBasic_HDRP.shadergraph`.
   - Alternatively I can produce a `.shadergraph` asset text and commit it here, but that is version-sensitive and may need adjustments.

3. After you (or I) create the Shader Graph in Unity, assign it to the `ToonBasic.mat` material and run Play tests to verify visuals.

Commands & quick checks
- To see the top shaders quickly:
  - `head -n 30 shader_aggregate.csv` (or open in Excel)
- To get the exact files that reference a material (from GUID-based report): open `material_usage_by_guid.csv`.

If you confirm, I will: (A) produce the Editor script that programmatically creates a Shader Graph for `ToonBasic` and (B) supply precise Unity actions to run it and verify the result. Please confirm and I will proceed to create the Editor script. (This approach avoids fragile manual .shadergraph text and uses Unity APIs to create a correct asset.)
